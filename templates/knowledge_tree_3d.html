        <!DOCTYPE html>
        <html>
        <head>
            <title>AP Statistics Knowledge Tree - 3D Visualization</title>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
            <style>
                body { margin: 0; padding: 0; overflow: hidden; }
                #tree-container { 
                    position: absolute; 
                    top: 0; 
                    left: 0; 
                    width: 100%; 
                    height: 100vh; 
                    z-index: 1;
                }
                .controls { 
                    position: absolute; 
                    top: 10px; 
                    left: 10px; 
                    z-index: 100; 
                    background: rgba(255,255,255,0.7); 
                    padding: 10px; 
                    border-radius: 5px; 
                }
                .legend { 
                    position: absolute; 
                    bottom: 10px; 
                    left: 10px; 
                    z-index: 100; 
                    background: rgba(255,255,255,0.7); 
                    padding: 10px; 
                    border-radius: 5px; 
                }
                .legend-item { display: flex; align-items: center; margin-bottom: 5px; }
                .legend-color { width: 20px; height: 20px; margin-right: 10px; border-radius: 50%; }
                .active-branch { background-color: #00aa00; }
                .inactive-branch { background-color: #aaaaaa; }
                .highlight { background-color: #ff9900; }
                #loading { 
                    position: absolute; 
                    top: 50%; 
                    left: 50%; 
                    transform: translate(-50%, -50%); 
                    z-index: 200; 
                    background: rgba(0,0,0,0.7); 
                    color: white; 
                    padding: 20px; 
                    border-radius: 10px; 
                    text-align: center;
                }
            </style>
        </head>
        <body>
            <div id="loading">
                <h3>Loading 3D Knowledge Tree...</h3>
                <p>Please wait while we build the visualization.</p>
            </div>
            
            <div id="tree-container"></div>
            
            <div class="controls">
                <a href="{{ url_for('index') }}" class="btn btn-primary">Back to Problems</a>
                <a href="{{ url_for('topics') }}" class="btn btn-secondary">View Knowledge Tree</a>
            </div>
            
            <div class="legend">
                <h5>Legend</h5>
                <div class="legend-item">
                    <div class="legend-color active-branch"></div>
                    <span>Active Topic (Has Problems)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color inactive-branch"></div>
                    <span>Inactive Topic (No Problems)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color highlight"></div>
                    <span>Selected Node</span>
                </div>
                <p class="mt-2">
                    <small>Tip: Click on a topic node to view its problems, or click on a problem node to view its details.</small>
                </p>
            </div>
            
            <!-- Three.js library -->
            <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/DragControls.js"></script>
            
            <!-- Knowledge Tree Visualization Script -->
            <script src="{{ url_for('static', filename='knowledge_tree_3d.js') }}"></script>
            
            <script>
                // Hide loading message when visualization is ready
                window.addEventListener('load', function() {
                    setTimeout(function() {
                        const loading = document.getElementById('loading');
                        if (loading) {
                            loading.style.display = 'none';
                        }
                    }, 3000); // Hide after 3 seconds
                });
            </script>
        </body>
        </html>
        